(function(e){function t(t){for(var a,o,n=t[0],l=t[1],m=t[2],u=0,d=[];u<n.length;u++)o=n[u],r[o]&&d.push(r[o][0]),r[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);c&&c(t);while(d.length)d.shift()();return i.push.apply(i,m||[]),s()}function s(){for(var e,t=0;t<i.length;t++){for(var s=i[t],a=!0,n=1;n<s.length;n++){var l=s[n];0!==r[l]&&(a=!1)}a&&(i.splice(t--,1),e=o(o.s=s[0]))}return e}var a={},r={app:0},i=[];function o(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=a,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(s,a,function(t){return e[t]}.bind(null,a));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=t,n=n.slice();for(var m=0;m<n.length;m++)t(n[m]);var c=l;i.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"034f":function(e,t,s){"use strict";var a=s("64a9"),r=s.n(a);r.a},1:function(e,t){},2:function(e,t){},"4b96":function(e,t,s){"use strict";var a=s("50c0"),r=s.n(a);r.a},"50c0":function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t);s("cadf"),s("551c"),s("f751"),s("097d");var a=s("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("img",{attrs:{alt:"Vue logo",src:s("cf05")}}),a("FlashMessage"),a("router-view")],1)},i=[],o=(s("034f"),s("2877")),n={},l=Object(o["a"])(n,r,i,!1,null,null,null),m=l.exports,c=s("8c4f"),u=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"employees"}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-3"}),e._m(0),s("div",{staticClass:"col-md-5"},[s("button",{staticClass:"btn btn-outline-warning",staticStyle:{float:"left","margin-left":"80px"},on:{click:e.logout}},[e._v("LOGOUT")])])]),s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-8",staticStyle:{"border-right":"1px solid silver"}},[s("b",[e._v("EMPLOYEE DETAILS")]),s("div"),s("table",{staticClass:"table table-bordered table-striped"},[e._m(1),e._l(e.items,function(t){return s("tr",{key:t._id},[s("td",[e._v(e._s(t.name))]),s("td",[e._v(e._s(t.email))]),s("td",[e._v(e._s(t.domain))]),s("td",[e._v(e._s(t.salary))]),s("td",[s("button",{staticClass:"btn btn-warning",attrs:{type:"button",title:"Edit Employee"},on:{click:function(s){return e.setUpdate(t)}}},[s("i",{staticClass:"fa fa-pencil"})])]),s("td",[s("button",{staticClass:"btn btn-danger",attrs:{type:"button",title:"Delete Employee"},on:{click:function(s){return e.remove(t)}}},[s("i",{staticClass:"fa fa-trash"})])]),s("td",[s("button",{class:{"btn btn-primary":!t.isVerified,"btn btn-secondary":t.verified},attrs:{type:"button",title:t.isVerified?"Employee Verifed":"Verify Employee?",disabled:1==t.isVerified},on:{click:function(s){return e.sendVerificationToken(t,"sms")}}},[s("i",{class:{"fa fa-check":t.isVerified,"fa fa-clock-o":!t.isVerified}})])])])}),e.items.length?e._e():s("tr",[s("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"5"}},[e._v("No Data Found")])])],2)]),e.isUpdateUser?s("div",{staticClass:"col-md-4"},[s("form",{staticClass:"form-group",on:{submit:function(t){return t.preventDefault(),e.updateItem(t)}}},[e.errors.length?s("p",[s("b",[e._v("Please correct the following error(s):")]),s("ul",e._l(e.errors,function(t,a){return s("li",{key:a,staticClass:"alert alert-danger"},[e._v(e._s(t))])}),0)]):e._e(),s("span",[s("b",[e._v(e._s(e.action))])]),s("hr"),s("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"form-control",staticStyle:{"margin-bottom":"20px"},attrs:{name:"name",placeholder:"Employee Name"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",staticStyle:{"margin-bottom":"20px"},attrs:{name:"email",placeholder:"Employee Email",disabled:e.isUpdateUser},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.domain,expression:"domain"}],staticClass:"form-control",staticStyle:{"margin-bottom":"20px"},attrs:{name:"domain",placeholder:"Employee Domain e.g. Dev Ops"},domProps:{value:e.domain},on:{input:function(t){t.target.composing||(e.domain=t.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.salary,expression:"salary"}],staticClass:"form-control",staticStyle:{"margin-bottom":"20px"},attrs:{type:"number",name:"salary",placeholder:"Employee Salary"},domProps:{value:e.salary},on:{input:function(t){t.target.composing||(e.salary=t.target.value)}}}),s("button",{staticClass:"btn btn-outline-danger",staticStyle:{"margin-right":"10px"},on:{click:e.resetForm}},[e._v("CANCEL")]),s("button",{staticClass:"btn btn-outline-warning",attrs:{type:"submit",value:"submit"}},[e._v("UPDATE")])])]):e._e(),e.isVerifyPhone?s("div",{staticClass:"col-md-4"},[s("form",{staticClass:"form-group",on:{submit:function(t){return t.preventDefault(),e.verifyOTP(t)}}},[e.errors.length?s("p",[s("b",[e._v("Please correct the following error(s):")]),s("ul",e._l(e.errors,function(t,a){return s("li",{key:a,staticClass:"alert alert-danger"},[e._v(e._s(t))])}),0)]):e._e(),s("span",[s("b",[e._v(e._s(e.action))])]),s("hr"),s("vue-tel-input",{staticClass:"form-control",staticStyle:{"margin-bottom":"20px"},attrs:{defaultCountry:"IN",disabled:e.isVerifyPhone},model:{value:e.phone,callback:function(t){e.phone="string"===typeof t?t.trim():t},expression:"phone"}}),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.otp,expression:"otp",modifiers:{trim:!0}}],staticClass:"form-control",staticStyle:{"margin-bottom":"20px"},attrs:{type:"text",name:"otp",placeholder:"Enter OTP"},domProps:{value:e.otp},on:{input:function(t){t.target.composing||(e.otp=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),s("div",{staticStyle:{color:"red"}},[e._v("OTP expires in "+e._s(e.timerDisplay)+" minutes!")]),s("br"),s("br"),s("button",{staticClass:"btn btn-outline-danger",staticStyle:{"margin-right":"10px"},on:{click:e.resetForm}},[e._v("CANCEL")]),s("button",{staticClass:"btn btn-outline-warning",attrs:{type:"submit",value:"submit",disabled:!e.otp}},[e._v("VERIFY")])],1),s("button",{staticClass:"btn btn-outline-primary",on:{click:function(t){return e.sendVerificationToken(e.phone,"call")}}},[e._v("CALL ME INSTEAD")])]):e._e()])])])},d=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-md-3"},[s("h3",{staticStyle:{"margin-bottom":"15px",float:"right","margin-right":"40px"}},[e._v("CRUD (Vue & Node)")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("th",{staticStyle:{"text-align":"center"}},[e._v("Name")]),s("th",{staticStyle:{"text-align":"center"}},[e._v("Email")]),s("th",{staticStyle:{"text-align":"center"}},[e._v("Domain")]),s("th",{staticStyle:{"text-align":"center"}},[e._v("Salary")]),s("th",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[e._v("Actions")])])}],p=s("cebc"),h=(s("28a5"),s("7618")),f=(s("7f7f"),s("2f62")),g=s("fb67"),v=s.n(g),y=s("72bf"),b=s.n(y),_={name:"Employees",components:{VueTelInput:v.a},data:function(){return{items:[],_id:"",name:"",email:"",phone:"",domain:"",salary:"",action:"ADD EMPLOYEE",update_id:"",isUpdateUser:!1,backup:{},errors:[],otp:"",timerDisplay:"",isVerifyPhone:!1,confirmationDialogValue:""}},methods:{getItems:function(){var e=this;this.axios.get("api/employees/all_employees",{headers:{Accept:"application/json","Access-Control-Allow-Origin":"*","x-access-token":this.getToken}}).then(function(t){e.items=t.data.data}).catch(function(){e.flashMessage.error({title:"",message:"Something went wrong",time:5e3,flashMessageStyle:{backgroundColor:"linear-gradient(#e66465, #9198e5)"}})})},updateItem:function(){var e=this;if(this.validateForm()){var t={_id:this.update_id,name:this.name,email:this.email,domain:this.domain,salary:this.salary},s=b.a.stringify(t),a=this.items.indexOf(this.backup);this.axios.put("api/employees/update_employee",s,{headers:{"Content-Type":"application/x-www-form-urlencoded","x-access-token":this.getToken}}).then(function(s){e.items[a].name=t.name,e.items[a].email=t.email,e.items[a].domain=t.domain,e.items[a].salary=t.salary,e.resetForm(),e.flashMessage.success({title:"",message:s.data.message,time:3e3,flashMessageStyle:{backgroundColor:"linear-gradient(#e66465, #9198e5)"}})}).catch(function(){e.flashMessage.error({title:"",message:"Something went wrong",time:3e3,flashMessageStyle:{backgroundColor:"linear-gradient(#e66465, #9198e5)"}})})}},setUpdate:function(e){this.isVerifyPhone=!1,this.errors=[],this.action="UPDATE  EMPLOYEE: "+e.name,this.update_id=e._id,this.name=e.name,this.email=e.email,this.domain=e.domain,this.salary=e.salary,this.backup=e,this.isUpdateUser=!0},remove:function(e){var t=this;this.errors=[],this.$bvModal.msgBoxConfirm("Please confirm that you want to delete.",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1,centered:!0}).then(function(s){s&&t.axios.delete("api/employees/delete_employee/"+e._id,{headers:{"Content-Type":"application/x-www-form-urlencoded","x-access-token":t.getToken}}).then(function(s){var a=t.items.indexOf(e);t.items.splice(a,1),t.flashMessage.success({title:"",message:s.data.message,time:3e3,flashMessageStyle:{backgroundColor:"linear-gradient(#e66465, #9198e5)"}})}).catch(function(){t.flashMessage.error({title:"",message:"Something went wrong",time:3e3,flashMessageStyle:{backgroundColor:"linear-gradient(#e66465, #9198e5)"}})})}).catch(function(){})},resetForm:function(){this.isUpdateUser=!1,this.isVerifyPhone=!1,this.emp_id="",this.name="",this.email="",this.domain="",this.salary="",this.password="",this.otp="",this.timerDisplay="",this.action="ADD EMPLOYEE"},validateForm:function(){return this.errors=[],this.name=this.name.trim(),this.email=this.email.trim(),this.domain=this.domain.trim(),this.name.trim()?/^[a-zA-Z ]+$/.test(this.name)||this.errors.push("Employee name should be in correct format."):this.errors.push("Employee name required."),this.email?/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(this.email)||this.errors.push("Employee email should be in proper format."):this.errors.push("Employee email required."),this.domain.trim()?/^[a-zA-Z ]+$/.test(this.domain)||this.errors.push("Employee domain should be in correct format."):this.errors.push("Employee domain required."),this.salary?(this.salary<0||this.salary>999999999)&&this.errors.push("Employee salary should be in between 0 & 1000000000"):this.errors.push("Employee salary required."),!(this.errors.length>0)},logout:function(){var e=this;this.$store.dispatch("logout").then(function(){e.$router.push("/login")})},sendVerificationToken:function(e,t){var s=this,a="object"==Object(h["a"])(e)?e.phone:e;this.isUpdateUser=!1;var r=b.a.stringify({phone:this.returnPhone(a),code:a.split(" ")[0],via:t});this.axios.post("api/employees/sendOTP",r,{headers:{"Content-Type":"application/x-www-form-urlencoded","x-access-token":this.getToken}}).then(function(t){s.flashMessage.success({title:"",message:t.data.message,time:3e3,flashMessageStyle:{backgroundColor:"linear-gradient(#e66465, #9198e5)"}}),"object"==Object(h["a"])(e)&&(s._id=e._id),s.isVerifyPhone=!0,s.phone=a,s.action="VERIFY PHONE NUMBER",s.startTimer(600)}).catch(function(e){s.flashMessage.error({title:"",message:e.response.data.message,time:3e3,flashMessageStyle:{backgroundColor:"linear-gradient(#e66465, #9198e5)"}})})},verifyOTP:function(){var e=this;if(!this.otp)return this.errors.push("OTP required.");var t=b.a.stringify({phone:this.returnPhone(this.phone),code:this.phone.split(" ")[0],token:this.otp,_id:this._id});this.axios.post("api/employees/verifyOTP",t,{headers:{"Content-Type":"application/x-www-form-urlencoded","x-access-token":this.getToken}}).then(function(t){e.resetForm(),e.items.map(function(t){t._id==e._id&&(t.isVerified=!0)}),e.flashMessage.success({title:"",message:t.data.message,time:3e3,flashMessageStyle:{backgroundColor:"linear-gradient(#e66465, #9198e5)"}})}).catch(function(t){e.flashMessage.error({title:"",message:t.response.data.message,time:3e3,flashMessageStyle:{backgroundColor:"linear-gradient(#e66465, #9198e5)"}})})},returnPhone:function(e){var t=e.split(" ");return t.slice(1,t.length).join("")},startTimer:function(e){var t,s,a=e,r=this;setInterval(function(){t=parseInt(a/60,10),s=parseInt(a%60,10),t=t<10?"0"+t:t,s=s<10?"0"+s:s,r.timerDisplay=t+":"+s,--a<0&&(a=e)},1e3)}},computed:Object(p["a"])({},Object(f["b"])(["getToken","isLoggedIn"])),created:function(){this.isLoggedIn?this.getItems():this.$router.push("/login")}},w=_,E=Object(o["a"])(w,u,d,!1,null,null,null),C=E.exports,x=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"row",attrs:{id:"register"}},[s("FlashMessage"),s("div",{staticClass:"col-md-4"}),s("div",{staticClass:"col-md-4"},[s("form",{staticClass:"form-group",on:{submit:e.createItem}},[e.errors.length?s("p",[s("b",[e._v("Please correct the following error(s):")]),s("ul",e._l(e.errors,function(t,a){return s("li",{key:a,staticClass:"alert alert-danger"},[e._v(e._s(t))])}),0)]):e._e(),e._m(0),s("hr"),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.name,expression:"name",modifiers:{trim:!0}}],staticClass:"form-control",staticStyle:{"margin-bottom":"20px"},attrs:{name:"name",placeholder:"Employee Name"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.email,expression:"email",modifiers:{trim:!0}}],staticClass:"form-control",staticStyle:{"margin-bottom":"20px"},attrs:{name:"email",placeholder:"Employee Email"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),s("vue-tel-input",{staticClass:"form-control",staticStyle:{"margin-bottom":"20px"},attrs:{defaultCountry:"IN"},model:{value:e.phone,callback:function(t){e.phone="string"===typeof t?t.trim():t},expression:"phone"}}),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.domain,expression:"domain",modifiers:{trim:!0}}],staticClass:"form-control",staticStyle:{"margin-bottom":"20px"},attrs:{name:"domain",placeholder:"Employee Domain e.g. Dev Ops"},domProps:{value:e.domain},on:{input:function(t){t.target.composing||(e.domain=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.salary,expression:"salary",modifiers:{trim:!0}}],staticClass:"form-control",staticStyle:{"margin-bottom":"20px"},attrs:{type:"number",name:"salary",placeholder:"Employee Salary"},domProps:{value:e.salary},on:{input:function(t){t.target.composing||(e.salary=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.password,expression:"password",modifiers:{trim:!0}}],staticClass:"form-control",staticStyle:{"margin-bottom":"20px"},attrs:{type:"password",name:"password",placeholder:"Employee Password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),s("button",{staticClass:"btn btn-outline-primary",attrs:{type:"submit",value:"submit"}},[e._v("REGISTER")]),s("br"),s("br"),s("button",{staticClass:"btn btn-outline-warning",on:{click:e.redirectTologin}},[e._v("GO TO LOGIN")])],1)]),s("div",{staticClass:"col-md-4"})],1)},k=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("b",[e._v("EMPLOYEE REGISTRATION FORM")])])}],S={name:"Register",components:{VueTelInput:v.a},data:function(){return{name:"",email:"",domain:"",salary:"",password:"",phone:"",errors:[]}},methods:{createItem:function(e){var t=this;if(e.preventDefault(),this.validateForm()){var s={name:this.name,email:this.email,phone:this.phone,domain:this.domain,salary:this.salary,password:this.password};this.$store.dispatch("register",s).then(function(e){t.redirectTologin(),t.flashMessage.success({title:"",message:e.data.message,time:3e3,flashMessageStyle:{backgroundColor:"linear-gradient(#e66465, #9198e5)"}})}).catch(function(e){t.flashMessage.error({title:"",message:e.response.data.message,time:3e3,flashMessageStyle:{backgroundColor:"linear-gradient(#e66465, #9198e5)"}})})}},validateForm:function(){this.errors=[];var e="";return this.name?/^[a-zA-Z ]+$/.test(this.name)||this.errors.push("Employee name should be in correct format."):this.errors.push("Employee name required."),this.email?/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(this.email)||this.errors.push("Employee email should be in proper format."):this.errors.push("Employee email required."),this.phone?(e=this.phone.split(" "),e=e.slice(1,e.length).join(""),/^(\+?\d{1,4})?(?!0+\s+,?$)\d{10}\s*,?$/.test(e)||this.errors.push("Phone number should be in correct format.")):this.errors.push("Phone number required."),this.domain?/^[a-zA-Z ]+$/.test(this.domain)||this.errors.push("Employee domain should be in correct format."):this.errors.push("Employee domain required."),this.salary?(this.salary<0||this.salary>999999999)&&this.errors.push("Employee salary should be in between 0 & 1000000000"):this.errors.push("Employee salary required."),this.password||this.errors.push("Employee password required."),!(this.errors.length>0)},resetForm:function(){this._id="",this.name="",this.email="",this.domain="",this.salary="",this.password=""},redirectTologin:function(){this.resetForm(),this.$router.push("/login")}}},P=S,M=Object(o["a"])(P,x,k,!1,null,null,null),O=M.exports,T=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"row",attrs:{id:"login"}},[s("div",{staticClass:"col-md-4"}),s("div",{staticClass:"col-md-4"},[s("form",{on:{submit:e.login}},[e.errors.length?s("p",[s("b",[e._v("Please correct the following error(s):")]),s("ul",e._l(e.errors,function(t,a){return s("li",{key:a,staticClass:"alert alert-danger"},[e._v(e._s(t))])}),0)]):e._e(),e._m(0),s("hr"),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.email,expression:"email",modifiers:{trim:!0}}],staticClass:"form-control",staticStyle:{"margin-bottom":"20px"},attrs:{name:"email",placeholder:"Employee Email"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.password,expression:"password",modifiers:{trim:!0}}],staticClass:"form-control",staticStyle:{"margin-bottom":"20px"},attrs:{type:e.type,name:"password",placeholder:"Employee Password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),s("span",{staticClass:"fa fa-fw fa-eye eyeicon",attrs:{title:"Show/Hide password"},on:{click:e.seeHidePassword}})]),s("div",{staticStyle:{float:"left"}},[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.isRememberMe,expression:"isRememberMe"}],attrs:{type:"checkbox",name:"rememberMe"},domProps:{checked:Array.isArray(e.isRememberMe)?e._i(e.isRememberMe,null)>-1:e.isRememberMe},on:{change:function(t){var s=e.isRememberMe,a=t.target,r=!!a.checked;if(Array.isArray(s)){var i=null,o=e._i(s,i);a.checked?o<0&&(e.isRememberMe=s.concat([i])):o>-1&&(e.isRememberMe=s.slice(0,o).concat(s.slice(o+1)))}else e.isRememberMe=r}}}),s("b",[e._v(" Keep me logged in")])])]),s("br"),s("br"),s("button",{staticClass:"btn btn-outline-primary",attrs:{type:"submit",value:"Submit"}},[e._v("LOGIN")]),s("br"),s("br"),s("button",{staticClass:"btn btn-outline-warning",on:{click:e.navigateToRegister}},[e._v("REGISTER EMPLOYEE")])])]),s("div",{staticClass:"col-md-4"})])},I=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("b",[e._v("EMPLOYEE LOGIN FORM")])])}],$={name:"Login",data:function(){return{email:"",password:"",isRememberMe:!1,type:"password",errors:[]}},methods:{login:function(e){var t=this;if(e.preventDefault(),this.validateForm()){var s={email:this.email,password:this.password};this.$store.dispatch("login",s).then(function(e){t.rememberMe(),t.resetForm(),t.flashMessage.success({title:"",message:e.message,time:3e3,flashMessageStyle:{backgroundColor:"linear-gradient(#e66465, #9198e5)"}}),t.$router.push("/employees")}).catch(function(e){t.flashMessage.error({title:"",message:e.response.data.message,time:3e3,flashMessageStyle:{backgroundColor:"linear-gradient(#e66465, #9198e5)"}})})}},validateForm:function(){return this.errors=[],this.email=this.email.trim(),this.email?/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(this.email)||this.errors.push("Employee email should be in proper format."):this.errors.push("Employee email required."),this.password||this.errors.push("Employee password required."),!(this.errors.length>0)},resetForm:function(){this.email="",this.password="",this.errors=[]},navigateToRegister:function(){this.resetForm(),this.$router.push("/register")},rememberMe:function(){this.isRememberMe?localStorage.setItem("loggedInUser",JSON.stringify({email:this.email,password:this.password})):localStorage.removeItem("loggedInUser")},seeHidePassword:function(){"password"==this.type?this.type="text":this.type="password"}},created:function(){if(localStorage.getItem("loggedInUser")){this.isRememberMe=!0;var e=JSON.parse(localStorage.getItem("loggedInUser"));this.email=e.email,this.password=e.password}}},N=$,U=(s("4b96"),Object(o["a"])(N,T,I,!1,null,"29387484",null)),A=U.exports;a["default"].use(c["a"]);var R=new c["a"]({routes:[{path:"/",name:"Login",component:A},{path:"/register",name:"Register",component:O},{path:"/employees",name:"Employees",component:C},{path:"**",redirect:"/"}]}),D=s("bc3a"),V=s.n(D),F={token:localStorage.getItem("token")||"",status:""},j={getToken:function(e){return e.token},isLoggedIn:function(e){return!!e.token},authStatus:function(e){return e.status}},L={register:function(e,t){var s=e.commit;return new Promise(function(e,a){s("auth_request"),V.a.post("api/user/register",t).then(function(t){e(t)}).catch(function(e){console.log(e),a(e)})})},login:function(e,t){var s=e.commit;return new Promise(function(e,a){s("auth_request"),V.a.post("api/user/login",t).then(function(a){var r=a.data,i=r.data;localStorage.setItem("token",i),V.a.defaults.headers.common["x-access-token"]=i,s("auth_success",i,t),e(r)}).catch(function(e){s("auth_error"),localStorage.removeItem("token"),a(e)})})},logout:function(e){var t=e.commit;return new Promise(function(e,s){t("logout"),localStorage.removeItem("token"),delete V.a.defaults.headers.common["x-access-token"],e()})}},q={auth_request:function(e){e.status="loading"},auth_success:function(e,t,s){e.status="success",e.token=t},auth_error:function(e){e.status="error"},logout:function(e){e.status="",e.token=""}},z={state:F,getters:j,actions:L,mutations:q};a["default"].use(f["a"]);var Y=new f["a"].Store({modules:{autheticate:z}}),Z=s("a7fe"),G=s.n(Z),H=s("5926"),J=s.n(H),B=s("5f5b");s("bf68"),s("f9e3"),s("2dd8");a["default"].use(G.a,V.a),a["default"].use(B["a"]),a["default"].use(J.a),a["default"].config.productionTip=!1;var K=localStorage.getItem("token");K&&(a["default"].prototype.$http.defaults.headers.common["x-access-token"]=K),new a["default"]({router:R,store:Y,render:function(e){return e(m)}}).$mount("#app")},"64a9":function(e,t,s){},cf05:function(e,t,s){e.exports=s.p+"img/logo.82b9c7a5.png"}});
//# sourceMappingURL=app.7b1d0c5a.js.map